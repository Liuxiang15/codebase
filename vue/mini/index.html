<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mini-vue</title>
</head>

<body>
    <div id="app">
        <p>测试插值普通属性-年龄：{{age}}</p>
        <p>测试插值嵌套属性-info里的hoby：{{info.hobby}}</p>
        <div>
            <p>测试v-text</p>
            <div v-text="msg"></div>
        </div>
        <div>
            <p>测试v-model</p>
            <input v-model="desc" type="text">
        </div>
        <div>
            <p>测试v-html</p>
            <p v-html="desc"></p>
        </div>
        <div>
            测试array元素添加
            <button @click="addArr">数组增加元素</button>
        </div>

    </div>
    <script src="./js/dep.js"></script>
    <script src="./js/watcher.js"></script>
    <script src="./js/compiler.js"></script>
    <script type="module">
        import Vue from './js/vue.js'
        let vm = new Vue({
            el: '#app',
            data: {
                msg: '123',
                age: 18,
                desc: '<span style="color: red">飞人好帅</span>',
                info: {
                    hobby: 'coding'
                },
                arr: [1, 2, 3, 4, 5]

            },
            methods: {
                addArr() {
                    console.log('in addArr')
                    this.arr.push(6)
                }
            }
        })
        console.log(vm)
    </script>

    <script>
        // 4、在Vue 响应式中应用到了 发布订阅模式 我们先来了解下

        // 首先来说简单介绍下 一共有三个角色
        //  发布者、 订阅者、  信号中心
        // 举个现实中例子 作者(发布者)写一篇文章 发到了掘金(信号中心), 掘金可以处理文章然后推送到了首页，然后各自大佬(订阅者)就可以订阅文章


        // class Vue {
        //     constructor() {
        //         // 存储时间和回调
        //         this._subs = {}
        //     }
        //     // 监听
        //     $on (type, fn) {
        //         const callbacks = this._subs[type] || []
        //         callbacks.push(fn)
        //         this._subs[type] = callbacks
        //     }
        //     $emit (type, ...args) {
        //         const callbacks = this._subs[type] || []
        //         callbacks.forEach(fn => fn(...args))
        //     }

        // }

        // const evevtBus = new Vue()
        // // 监听sum
        // evevtBus.$on('sum', function (...args) {
        //     const total = args.reduce((prev, next) => prev + next, 0)
        //     console.log(total)
        // })
        // // 触发sum
        // evevtBus.$emit('sum', 1, 2, 4, 5)







    </script>
</body>


</html>